(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{598:function(e,t,r){"use strict";r.r(t);var n,l=r(3),o=(r(19),{head:function(){return{title:this.moduleTitle}},data:function(){return{moduleTitle:"Edit Article - "+this.$route.query.entType,entry:{enTitle:"",enBody:"",imgUrl:null,guestEnable:!1,delImg:!1,disabled:!1},imgFile:null}},computed:{Title:function(){return null==this.$route.query.entNo?"エントリ登録":"エントリ編集"}},mounted:(n=Object(l.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.$store.dispatch("SetTitle",this.moduleTitle),this.refreshPage();case 2:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)}),watch:{$route:function(e,t){var r=this;return Object(l.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.refreshPage();case 2:case"end":return e.stop()}}),e)})))()}},methods:{refreshPage:function(){var e=this;null!=this.$route.query.entType?null!=this.$route.query.entNo&&this.$store.dispatch("article/GetEntry",{entType:this.$route.query.entType,entNo:this.$route.query.entNo}).then((function(t){e.entry.enTitle=t.enTitle,e.entry.enBody=t.enBody,e.entry.imgUrl=t.imgUrl,e.entry.guestEnable=t.guestEnable})):this.$store.dispatch("widget/SetModalMsg",{enabled:!0,title:"Error",body:"EntryTypeを指定してください。"})},OnPost:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){var r,n,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!=e.entry.enTitle){t.next=3;break}return e.$store.dispatch("widget/SetModalMsg",{enabled:!0,title:"Error",body:"タイトルを入力してください。"}),t.abrupt("return");case 3:if(null==e.imgFile||null==e.imgFile[0]){t.next=8;break}return t.next=6,e.$store.dispatch("firebaseCommon/UploadImagToStorage",e.imgFile[0]);case 6:r=t.sent,e.entry.imgUrl=r;case 8:n=null,null!=e.$route.query.entNo&&(n=e.$route.query.entNo),l=e.$route.query.entType,e.$store.dispatch("article/PostEntry",{entryNo:n,entryType:l,entryObj:e.entry}).then((function(t){t?$nuxt.$router.push("/article?entType="+l):e.$store.dispatch("widget/SetModalMsg",{enabled:!0,title:"Error",body:"データ更新に失敗しました。時間をおいて再度お試しください。"})}));case 12:case"end":return t.stop()}}),t)})))()}}}),c=r(26),y=r(38),d=r.n(y),m=r(198),h=r(622),v=r(453),f=r(441),T=r(489),x=r(454),$=r(455),w=r(480),component=Object(c.a)(o,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("h2",{staticClass:"primary--text"},[e._v(e._s(e.Title))]),e._v(" "),r("v-container",[r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{attrs:{label:"タイトル(必須)",color:"accent",type:"text"},model:{value:e.entry.enTitle,callback:function(t){e.$set(e.entry,"enTitle",t)},expression:"entry.enTitle"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12"}},[r("v-textarea",{attrs:{label:"本文(HTMLタグ使用可)",color:"accent",type:"text",rows:"10"},model:{value:e.entry.enBody,callback:function(t){e.$set(e.entry,"enBody",t)},expression:"entry.enBody"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12"}},[r("v-checkbox",{attrs:{label:"Guest公開",color:"accent"},model:{value:e.entry.guestEnable,callback:function(t){e.$set(e.entry,"guestEnable",t)},expression:"entry.guestEnable"}})],1),e._v(" "),r("v-col",{attrs:{lg:"4",md:"6",sm:"12",cols:"12"}},[r("v-file-input",{attrs:{multiple:"",label:"画像アップロード",color:"accent"},model:{value:e.imgFile,callback:function(t){e.imgFile=t},expression:"imgFile"}})],1),e._v(" "),r("v-col",{attrs:{lg:"4",md:"6",sm:"12",cols:"12"}},[null!=e.entry.imgUrl&&""!=e.entry.imgUrl?r("v-checkbox",{attrs:{label:"現在のアップロード画像を削除",color:"accent"},model:{value:e.entry.delImg,callback:function(t){e.$set(e.entry,"delImg",t)},expression:"entry.delImg"}}):e._e()],1)],1),e._v(" "),r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("v-btn",{attrs:{block:"",color:"primary"},on:{click:function(t){return e.OnPost()}}},[e._v("SAVE")])],1)],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports;d()(component,{VBtn:m.a,VCheckbox:h.a,VCol:v.a,VContainer:f.a,VFileInput:T.a,VRow:x.a,VTextField:$.a,VTextarea:w.a})}}]);