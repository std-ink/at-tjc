(window.webpackJsonp=window.webpackJsonp||[]).push([[43,8,11],{460:function(e,t,r){"use strict";r(191);var n=r(193);t.a=Object(n.a)("layout")},464:function(e,t,r){"use strict";r.r(t);r(11);var n={props:["dataFields","closeEditModal","returnData"],data:function(){return{}},computed:{},methods:{onUpdate:function(){for(var e="UPD",s=0;s<this.dataFields.length;s++)if("sys_updmode"==this.dataFields[s].name){"INS"==this.dataFields[s].val&&(e="INS");break}null==this.returnData?this.$store.dispatch("ChangeDataView",{input:this.dataFields,sys_updmode:e}):this.returnData({data:this.dataFields,sys_updmode:e}),this.closeEditModal()},onDelete:function(){null==this.returnData?this.$store.dispatch("ChangeDataView",{input:this.dataFields,sys_updmode:"DEL"}):this.returnData({data:this.dataFields,sys_updmode:"DEL"}),this.closeEditModal()}}},l=r(26),d=r(38),o=r.n(d),c=r(198),f=r(173),v=r(14),m=r(619),h=r(453),y=r(441),x=r(454),_=r(467),component=Object(l.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",[r("v-card-title",[e._v("データ修正")]),e._v(" "),r("v-container",[r("v-row",{staticStyle:{margin:"30px 5px 0px 5px"}},e._l(e.dataFields,(function(t,i){return r("v-col",{key:i,attrs:{lg:"3",md:"3",sm:"6",cols:"12"}},[0==t.name.indexOf("sys_")||null!=t.fieldType&&"checkbox"==t.fieldType?e._e():r("v-text-field",{attrs:{label:t.name,readonly:t.readOnly,color:"accent",type:null==t.fieldType?"text":t.fieldType},model:{value:t.val,callback:function(r){e.$set(t,"val",r)},expression:"dataField.val"}}),e._v(" "),0!=t.name.indexOf("sys_")&&null!=t.fieldType&&"checkbox"==t.fieldType?r("v-checkbox",{attrs:{label:t.name,readonly:t.readOnly,color:"accent"},model:{value:t.val,callback:function(r){e.$set(t,"val",r)},expression:"dataField.val"}}):e._e()],1)})),1)],1),e._v(" "),r("v-card-actions",{staticStyle:{"padding-bottom":"30px"}},[r("div",{staticClass:"flex-grow-1"}),e._v(" "),r("v-btn",{attrs:{color:"primary"},on:{click:e.onUpdate}},[e._v("UPDATE")]),e._v(" "),r("v-btn",{attrs:{color:"primary"},on:{click:e.onDelete}},[e._v("DELETE")]),e._v(" "),r("v-btn",{attrs:{color:"primary"},on:{click:e.closeEditModal}},[e._v("CLOSE")])],1)],1)}),[],!1,null,null,null);t.default=component.exports;o()(component,{VBtn:c.a,VCard:f.a,VCardActions:v.a,VCardTitle:v.c,VCheckbox:m.a,VCol:h.a,VContainer:y.a,VRow:x.a,VTextField:_.a})},512:function(e,t,r){"use strict";r.r(t);var n,l=r(3),d=(r(12),r(57),r(58),r(19),{props:["edit"],data:function(){return{title:"DataViewer",dataHeader:[],careerData:[],editModal:!1,selected:[],saveDisabled:!0,search:null}},computed:{},watch:{$route:function(e,t){var r=this;return Object(l.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.refreshPage();case 2:case"end":return e.stop()}}),e)})))()}},mounted:(n=Object(l.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.refreshPage();case 2:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)}),methods:{refreshPage:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.$store.dispatch("members/GetMyProfile",e.$route.params.userNo).then((function(t){e.careerData=t.careers})),e.dataHeader=[{text:"UpdMode",value:"sys_updmode"},{text:"id",value:"id"},{text:"from日時",value:"from"},{text:"to日時",value:"to"},{text:"所属等",value:"dep"},{text:"概要コメント等",value:"desc"},{text:"非表示",value:"disabled"}];case 2:case"end":return t.stop()}}),t)})))()},OnClickRow:function(data){if("INS"!=data.sys_updmode&&null!=data.id){this.editModal=!0;var e=[{field:"id",name:"id",val:data.id,readOnly:!0,fieldType:"text"},{field:"from",name:"from日時",val:data.from,readOnly:!1,fieldType:"date"},{field:"to",name:"to日時",val:data.to,readOnly:!1,fieldType:"date"},{field:"dep",name:"所属等",val:data.dep,readOnly:!1,fieldType:"text"},{field:"desc",name:"概要コメント",val:data.desc,readOnly:!1,fieldType:"text"},{field:"disabled",name:"非表示",val:data.disabled,readOnly:!1,fieldType:"checkbox"}];this.selected=e}},OnAdd:function(){this.selected=[{field:"id",name:"id",val:"",readOnly:!0,fieldType:"text"},{field:"from",name:"from日時",val:"",readOnly:!1,fieldType:"date"},{field:"to",name:"to日時",val:"",readOnly:!1,fieldType:"date"},{field:"dep",name:"所属等",val:"",readOnly:!1,fieldType:"text"},{field:"desc",name:"概要コメント",val:"",readOnly:!1,fieldType:"text"},{field:"disabled",name:"非表示",val:!1,readOnly:!1,fieldType:"checkbox"}],this.editModal=!0},CloseEditModal:function(){this.editModal=!1},ReceiveData:function(e){for(var data=e.data,t=e.sys_updmode,r=null,i=0;i<data.length;i++)if("id"==data[i].field){r=data[i].val;break}if(null==r||""==r){for(var n={},l=0;l<data.length;l++)n[data[l].field]=data[l].val;return n.sys_updmode="INS",this.careerData.push(n),void this.RefreshSaveDisabled()}for(var d=null,o=0;o<this.careerData.length;o++)if(this.careerData[o].id==r){d=o;break}if(null!=d){this.careerData[d].id=null;for(var c=0;c<data.length;c++)this.careerData[d][data[c].field]=data[c].val;this.careerData[d].sys_updmode=t,this.RefreshSaveDisabled()}},OnSave:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){var r,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=[],i=0;case 2:if(!(i<e.careerData.length)){t.next=9;break}if(null!=e.careerData[i].sys_updmode&&""!=e.careerData[i].sys_updmode){t.next=5;break}return t.abrupt("continue",6);case 5:r.push(e.careerData[i]);case 6:i++,t.next=2;break;case 9:e.$store.dispatch("members/UpdateMyCareers",r).then((function(t){t?$nuxt.$router.push("/mypage"):e.$store.dispatch("widget/SetModalMsg",{enabled:!0,title:"Error",body:"データ更新に失敗しました。時間をおいて再度お試しください。"})}));case 10:case"end":return t.stop()}}),t)})))()},OnRefresh:function(){this.refreshPage()},RefreshSaveDisabled:function(){var e=this;try{this.careerData.forEach((function(element){null==element.sys_updmode||"UPD"!=element.sys_updmode&&"INS"!=element.sys_updmode&&"DEL"!=element.sys_updmode||(e.saveDisabled=!1)}))}catch(e){this.saveDisabled=!0}},filterOnlyCapsText:function(e,t,r){return null!=e&&null!=t&&"string"==typeof e&&-1!==e.toString().toLocaleUpperCase().indexOf(t)}}}),o=r(26),c=r(38),f=r.n(c),v=r(198),m=r(453),h=r(441),y=r(581),x=r(442),_=r(460),D=r(454),O=r(467),component=Object(o.a)(d,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-layout",{attrs:{column:"","justify-center":"","align-center":""}},[r("v-container",[r("v-text-field",{staticStyle:{"margin-bottom":"15px","margin-top":"-10px"},attrs:{label:"Search","append-icon":"mdi-magnify","hide-details":"",color:"accent"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),e._v(" "),e.careerData.length>0?r("v-data-table",{staticStyle:{margin:"20px 0px"},attrs:{headers:e.dataHeader,items:e.careerData,"hide-default-footer":!1,"show-group-by":!0,"custom-filter":e.filterOnlyCapsText,search:e.search},on:{"click:row":e.OnClickRow}}):e._e(),e._v(" "),e.edit?r("v-row",[r("v-col",{attrs:{cols:"0",md:"4",lg:"4",xl:"4"}}),e._v(" "),r("v-col",{attrs:{cols:"12",sm:"6",md:"2",lg:"2",xl:"2"}}),e._v(" "),r("v-col",{attrs:{cols:"12",sm:"6",md:"2",lg:"2",xl:"2"}},[r("v-btn",{attrs:{block:"",color:"primary"},on:{click:function(t){return e.OnAdd()}}},[e._v("\n          ADD\n        ")])],1),e._v(" "),r("v-col",{attrs:{cols:"12",sm:"6",md:"2",lg:"2",xl:"2"}},[r("v-btn",{attrs:{block:"",color:"primary"},on:{click:function(t){return e.OnRefresh()}}},[e._v("\n          REFRESH\n        ")])],1),e._v(" "),r("v-col",{attrs:{cols:"12",sm:"6",md:"2",lg:"2",xl:"2"}},[r("v-btn",{attrs:{block:"",color:"primary",disabled:e.saveDisabled},on:{click:function(t){return e.OnSave()}}},[e._v("\n          SAVE\n        ")])],1)],1):e._e()],1),e._v(" "),e.edit?r("v-dialog",{attrs:{width:"90%",persistent:!0},model:{value:e.editModal,callback:function(t){e.editModal=t},expression:"editModal"}},[r("DevDataViewEdit",{attrs:{dataFields:e.selected,closeEditModal:e.CloseEditModal,returnData:e.ReceiveData}})],1):e._e()],1)}),[],!1,null,null,null);t.default=component.exports;f()(component,{DevDataViewEdit:r(464).default}),f()(component,{VBtn:v.a,VCol:m.a,VContainer:h.a,VDataTable:y.a,VDialog:x.a,VLayout:_.a,VRow:D.a,VTextField:O.a})},603:function(e,t,r){"use strict";r.r(t);var n,l=r(3),d=(r(19),{head:function(){return{title:this.title}},data:function(){return{moduleTitle:"My Page",title:"来歴編集",dsModal:!1,dsInput:"com/usr_careers"}},watch:{$route:function(e,t){var r=this;return Object(l.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.refreshPage();case 2:case"end":return e.stop()}}),e)})))()}},mounted:(n=Object(l.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.refreshPage();case 2:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)}),methods:{refreshPage:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.$store.dispatch("SetTitle",e.moduleTitle);case 1:case"end":return t.stop()}}),t)})))()}}}),o=r(26),c=r(38),f=r.n(c),v=r(441),component=Object(o.a)(d,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("h2",{staticClass:"primary--text"},[e._v("来歴編集")]),e._v(" "),r("MypageEditCareerComp",{attrs:{edit:!0}})],1)}),[],!1,null,null,null);t.default=component.exports;f()(component,{MypageEditCareerComp:r(512).default}),f()(component,{VContainer:v.a})}}]);